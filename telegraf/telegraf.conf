# Telegraf configuration for collecting CPU, memory, and disk metrics
[agent]
  interval = "10s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = "1s"

[[outputs.influxdb_v2]]
  ## The full HTTP or UDP URL for your InfluxDB instance.
  urls = ["http://influxdb2:8086"]

  ## Token for authentication - set via docker-compose env `INFLUX_TOKEN`
  token = "${INFLUX_TOKEN}"

  organization = "ORG_NAME"
  bucket = "nickTest"

[[inputs.cpu]]
  percpu = true
  totalcpu = true
  collect_cpu_time = false
  report_active = false

[[inputs.mem]]

[[inputs.disk]]
  # monitor the root filesystem by default
  mount_points = ["/"]
  ignore_fs = ["tmpfs", "devtmpfs"]

# Optionally collect system-level metrics (requires host /proc and /sys mounts for host metrics)
[[inputs.system]]

# Optional: collect swap
[[inputs.swap]]

# NOTE: To collect host-level metrics, ensure the docker-compose service mounts:
#  - /proc:/host/proc:ro
#  - /sys:/host/sys:ro
# and adjust telegraf "procfs"/"sysfs" paths if needed.
